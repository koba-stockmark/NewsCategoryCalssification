# （１）述語項構造解析を用いたニュースのカテゴリ分類プログラム

## 必要ライブラ

SpaCy

+ SpaCy(https://megagonlabs.github.io/ginza/)からダウンロード
  + モデルは「ja_ginza_electra」と「ja_ginza」が使える。
    + ja_ginza_electraは制度が高い
    + ja_ginzaは速度が４倍早い
    + sentence_category_get.py 内で切り替え可能

# 入出力

## 入力

+ テキスト（文字列）
  + タイトル、リード文の区別なく文字列を入力可能。
    + タイトル
      + タイトル特有の体言止めや特殊記号に対応するためnews_category_classification.py内で変換をかけている。
      + 必要に応じて変換処理を追加してください。
    + リード文
      + 改行コード（\n）により文を分割。複数文入力可能だが、５文以上入力しても最初の５文しか解析の対象にならない。

## 出力

+ 形式

### <ニュースカテゴリ>,<ニュースカテゴリ>....

カテゴリはコンマ区切りのタグ形式でマルチタグで出力される。

## カテゴリ一覧

1. 意見
2. 見解
3. 提案


4. スポーツ
5. 芸能
6. 占い


7. イベント
8. セミナー


9. コラム
10. 説明
11. 紹介


12. 議案
13. 会議
14. 対談


15. 業界情報
16. 予測
17. 情報公開
18. 情報提供
19. レポート
20. 市場データ
21. 市場動向
22. 社会統計


23. 政府・予算
24. 政府・補助金
25. 政府・行革
26. 政府・認可
27. 政府・規制
28. 政府・宣言
29. 政府・会談


30. 要請
31. 募集
32. 契約
33. 法廷


34. 技術動向
35. 技術開発
36. 研究
37. 調査
38. 実験


39. 障害


40. 表彰
41. 特許


42. 業績


43. 戦略
44. 施策
45. 方針
46. 目標
47. 行動変化
48. 対策


49. 提携
50. 譲渡・買収
51. 利用・採用


52. 支援
53. 投資
54. 資金


55. サービス開始
56. サービス更新
57. サービス終了
58. 生産活動
59. 商品化
60. 営業活動
61. 受注


62. 価格変更
63. 価格


64. 税金


65. 為替


66. 株式概況


67. 人事
68. 組織 設立
69. 組織変更


70. 海外展開


71. 設備投資


72. 技術背景


73. 社会情勢
74. 社会事件
75. 社会問題


76. 前提
77. 現象
78. 効果
79. 背景

#### タイトル専用

80. 政府
81. 経済

## 評価データ

+ 別途用意

## ルール・辞書

+ category_rule_dic.py
  :カテゴリ判別関係の辞書

  + カテゴリルール (*_dic, o_v_*_dic, v_m_*_dic, modality_*_dic)
    + *_dic
      + 主述部単独で判断できるルール
    + o_v_*_dic
      + 主述部の述部＋項の組み合わせで判断するルール
    + v_m_*_dic
      + 主述部単独で特定のモダリティの場合に判断するルール
    + modality_*_dic
      + 単独あるいは組み合わせのモダリティにより判断するルール



        + 記述規則
            + 記述した条件に一致した場合にタグが付与される
            + 述部の規則は後方一致が基本
            + 述部を前方一致をしたい場合は単語末に[*]を付与する
            + 項に関しては部分一致
            + 補助述部辞書にある単語が補助述部の場合は「述部と項の組み合わせ規則」は有効
            + 単語は原型（lemma）を対象に比較する（用言の活用形は気にしなくて良い）
            + 慣用句に対する規則はまとめた表記で対応可能
            + 共通の構文構造（格フレーム的な）ごとにまとめて記述するのが望ましい

        + 利用可能モダリティ
            <断定>,<不確実>,<命令>,<過去>,<否定>,<告知>,<意思・願望>,<勧誘>
            <推量>,<仮定>,<感情付与>,<容易>,<困難>,<限定>,<当然>,<過剰>,<使役>
            <受け身>,<試行>,<継続>,<方向>,<経験>,<可能>,<疑問>
            <引用>,<目標>,<こと>,<とは>


  + カテゴリ判別処理の対象になる格の定義 (category_analyze_case)
  + カテゴリルールとタグの対応辞書(phrase_rule)
  + 補助述部でも政府活動と認めるカテゴリのルール(sub_phrase_rule)
  + 上位カテゴリの下位カテゴリへのマージルール(merge_rule)



+ その他の辞書
  + sub_verb_dic.py
    :補助用言辞書
  + special_verb_dic.py
    :企業活動動詞辞書
  + kanyouku_dic.py
    :慣用句辞書
  + modalty_rule_dic.py
    :モダリティ解析辞書

## プログラムリスト

### サンプルプログラム

+ new_category_sample.py

### メインプログラム (カテゴリ判別)

+ news_category_classification.py

  + 関数

  class CategoryClassification:

  def news_category_classification(self, text):

テキスト入力に対してカテゴリ情報を返す。
sentence_category_get.py内の"debug"フラグによりdebugモードにすると解析結果をダンプできる。
debugモードのときは解析結果のログ(tsv)が出力となる。

### ライブラリ
#### カテゴリ判別関係
+ news_category_classification.py (タイトルの前処理をしてカテゴリ解析を呼ぶ、メインプログラム)
+ sentence_category_get.py (テキストを述語項構造に変換しカテゴリを付与する)
+ sentence_category_chek.py (述語項構造解析結果をカテゴリルール辞書を用いて検証する)
#### 述語項構造解析関係
+ pas_analysis.py (形態素解析を呼び述語項構造の作成を行う)
+ predicate_get.py (述部の判断と基本術部の獲得)
+ predicate_phrase_analysis.py　（基本述部の解析。結合するとルールIDも返る）
+ predicate_split.py　（主述部と補助述部の分離処理）
+ main_verb_check.py (主述部か補助述部かの判断)
+ case_information_get.py　（格情報の獲得）
+ subject_get.py (主語の獲得)
+ parallel_get.py (並列項の獲得)
+ kanyouku_check.py (慣用句処理)
+ modality_analysis.py   (モダリティ処理)
+ chunker.py (名詞と動詞のチャンキングと格情報の獲得、各項の生成はここで行う)
+ data_dump.py (デバッグ用のデータダンプ)

# （２）カテゴリタグからPEST分類タグに変換するプログラム

## 必要ライブラ

news_category_classification (前記)

# 入出力

## ・入力

+ カテゴリータグ
  + 前記カテゴリー解析での解析結果
## ・出力
+ PEST分類(タグ)

### ・形式
### \<PEST大分類・PEST小分類>

PEST４つの大分類とそれらの小分類を「・」で区切ったタグ。

#### 大分類
+ 政治
+ 経済
+ 社会
+ 技術
#### 小分類
+ オピニオン 
+ トピック
+ レポート
+ 予測
+ 目標
+ 組織
+ リスク／チャンス
+ イベント

## ルール・辞書

+ PEST分類辞書(category2pest_dic.py)
  + カテゴリ判別の結果を集約してPEST分類を出力するための辞書
  + 大カテゴリルール(chage_rule)
    + 大カテゴリに分類されるカテゴリの規則
  + 小カテゴリルール(detail_rule)
    + 小カテゴリに分類されるカテゴリの規則

    
      + 小カテゴリがあり大カテゴリがない場合は「PEST不明」を大カテゴリとする
      + 大カテゴリがあり小カテゴリがない場合は「トピック」を小カテゴリとする

## プログラムリスト

### サンプルプログラム

+ new_category_sample.py（前記と同じ）

### メインプログラム (PEST分類)

+ category2pest.py

  + 関数

  class Category2Pest:

  def category2pest(self, tags):

### ライブラリ
news_category_classification